

<h2>Recibo de Contribuição</h2>

<p><strong>Membro:</strong> @Model.Membro.Nome</p>
<p><strong>Valor:</strong> @Model.Valor.ToString("C")</p>
<p><strong>Tipo:</strong> @Model.TipoContribuicao</p>
<p><strong>Forma de Pagamento:</strong> @Model.FormaPagto</p>
<p><strong>Data do Pagamento:</strong> @Model.DataPagamento?.ToString("dd/MM/yyyy")</p>

<div class="container-fluid d-flex justify-content-between align-items-center align-baseline">
    <a asp-action="MembroList" class="btn btn-secondary me-2">
        <i class="bi bi-arrow-return-left"></i> Voltar
    </a>
   
    <a asp-action="ImprimirComprovante" asp-route-id="@Model.Id" class="btn btn-danger me-2">
        <i class="bi bi-filetype-pdf"></i> Baixar
    </a>

    <button class="btn btn-success" onclick="compartilharPdf(@Model.Id)">
        <i class="bi bi-share"></i> Compartilhar
    </button>

</div>

<script>
    async function compartilharPdf(id) {

        if (!navigator.canShare) {
            alert("Compartilhamento não suportado neste navegador");
            return;
        }

        const response = await fetch(`/Contribuicao/ImprimirComprovante?id=${id}`);
        const blob = await response.blob();

        const file = new File([blob], `Recibo-${id}.pdf`, {
            type: "application/pdf"
        });

        if (navigator.canShare({ files: [file] })) {
            await navigator.share({
                title: "Comprovante de Contribuição",
                text: "Segue o comprovante em PDF",
                files: [file]
            });
        } else {
            alert("Este dispositivo não suporta compartilhamento de arquivos");
        }
    }
</script>


